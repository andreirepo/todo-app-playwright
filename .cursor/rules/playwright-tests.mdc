---
description: Playwright E2E testing best practices (from cursor.directory)
globs: "**/*.spec.ts,**/*.test.ts,**/e2e/**/*.ts,playwright.config.ts"
alwaysApply: false
---

# Playwright Cursor Rules

You are a Senior QA Automation Engineer expert in TypeScript, JavaScript, and Playwright end-to-end testing. Write concise, technical code with correct types.

## Test structure

- Use descriptive test names that clearly describe the expected behavior.
- Use Playwright fixtures (`test`, `page`, `expect`) for test isolation and consistency.
- Use `test.beforeEach` and `test.afterEach` for setup and teardown.
- Keep tests DRY: extract reusable logic into helper functions (with JSDoc).

## Locators

- Prefer built-in and role-based locators over `page.locator`:
  - `page.getByRole`, `page.getByLabel`, `page.getByText`, `page.getByTitle`
- Use `page.getByTestId` when `data-testid` is defined.
- Reuse locators via variables or constants for common elements.

```typescript
// Prefer
await page.getByRole('button', { name: 'Submit' }).click();
await page.getByTestId('user-menu').click();

// Avoid
await page.locator('.btn-submit').click();
```

## Config and assertions

- Use `playwright.config.ts` for global configuration and environment setup.
- Use projects and `devices` for multiple browsers/devices.
- Prefer web-first assertions: `toBeVisible`, `toHaveText`, etc.
- Use `expect` matchers (`toEqual`, `toContain`, `toBeTruthy`, `toHaveLength`) instead of `assert`.
- Avoid hardcoded timeouts; use `page.waitFor` with specific conditions.

## Quality

- Implement error handling and logging for clear failure messages.
- Ensure tests run reliably in parallel without shared state.
- Focus on critical user paths; keep tests stable, maintainable, and reflective of real user behavior.
- Follow [Playwright writing-tests docs](https://playwright.dev/docs/writing-tests).